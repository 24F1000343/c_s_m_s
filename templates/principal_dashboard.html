{% extends "base.html" %}
{% block content %}

<h2 class="fw-bold mb-4 text-primary text-center">Principal Dashboard</h2>

<!-- ===== Statistics Cards ===== -->
<div class="row g-4 justify-content-center">

    <!-- Total HODs -->
    <div class="col-md-3">
        <div class="card dashboard-card p-4 shadow-sm text-center">
            <h5 class="fw-bold mb-2">Total HODs</h5>
            <h2 class="text-primary">{{ hod_count }}</h2>
            <a href="/principal/hods" class="btn btn-outline-primary mt-2">Manage</a>
        </div>
    </div>

    <!-- Total Staff -->
    <div class="col-md-3">
        <div class="card dashboard-card p-4 shadow-sm text-center">
            <h5 class="fw-bold mb-2">Total Staff</h5>
            <h2 class="text-success">{{ staff_count }}</h2>
            <a href="/principal/staff" class="btn btn-outline-success mt-2">Manage</a>
        </div>
    </div>

    <!-- Total Meetings -->
    <div class="col-md-3">
        <div class="card dashboard-card p-4 shadow-sm text-center">
            <h5 class="fw-bold mb-2">Total Meetings</h5>
            <h2 class="text-info">{{ meeting_count }}</h2>
        </div>
    </div>

    <!-- Blacklisted Users -->
    <div class="col-md-3">
        <div class="card dashboard-card p-4 shadow-sm text-center border-danger">
            <h5 class="fw-bold mb-2 text-danger">Blacklisted Users</h5>
            <h2 class="text-danger">{{ blacklist_count }}</h2>
            <a href="/principal/blacklist" class="btn btn-outline-danger mt-2">View List</a>
        </div>
    </div>

</div>

<!-- ===== BULK MEETING BUTTON ===== -->
<div class="text-center my-4">
    <a href="/principal/meeting/bulk" class="btn btn-dark px-5 py-2 fw-bold">
        ðŸ“¢ Schedule Meeting for All (HOD + Staff)
    </a>
</div>

<hr class="my-4">

<!-- ===== Recent Meetings ===== -->
<h4 class="fw-bold mb-3">Recent Meetings</h4>

<div class="table-responsive">
<table class="table table-bordered table-striped">
    <thead class="table-primary">
        <tr>
            <th>ID</th>
            <th>Staff</th>
            <th>HOD</th>
            <th>Date</th>
            <th>Time</th>
            <th>Status</th>
        </tr>
    </thead>

    <tbody>
        {% for m in meetings %}
        <tr>
            <td>{{ m.id }}</td>

            <td>
                {% if m.staff %}
                    {{ m.staff.name }}
                {% else %}
                    <span class="text-muted">â€”</span>
                {% endif %}
            </td>

            <td>
                {% if m.hod %}
                    {{ m.hod.name }}
                {% else %}
                    <span class="text-muted">â€”</span>
                {% endif %}
            </td>

            <td>{{ m.date }}</td>
            <td>{{ m.time }}</td>
            <td>{{ m.status }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
</div>

{% endblock %}
